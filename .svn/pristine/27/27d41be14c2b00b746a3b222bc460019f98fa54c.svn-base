<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.alpha.commons.mapper.DiagnosisQuestionAnswerMapper">
    <resultMap id="diagnosisQuestionAnswer" type="com.alpha.server.rpc.diagnosis.pojo.DiagnosisQuestionAnswer">
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="question_code" jdbcType="VARCHAR" property="questionCode"/>
        <result column="answer_code" jdbcType="VARCHAR" property="answerCode"/>
        <result column="disease_code" jdbcType="VARCHAR" property="diseaseCode"/>
        <result column="answer_spec" jdbcType="INTEGER" property="answerSpec"/>
        <result column="weight" jdbcType="DOUBLE" property="weight"/>
        <result column="default_order" jdbcType="INTEGER" property="defaultOrder"/>
        <result column="next_question_id" jdbcType="BIGINT" property="nextQuestionId"/>
        <result column="incre_flag" jdbcType="VARCHAR" property="increFlag"/>
        <result column="opera_flag" jdbcType="VARCHAR" property="operaFlag"/>
        <result column="operate_type" jdbcType="VARCHAR" property="operateType"/>
        <result column="data_version" jdbcType="INTEGER" property="dataVersion"/>
        <result column="version_evolution" jdbcType="VARCHAR" property="versionEvolution"/>
    </resultMap>

    <select id="queryDiagnosisQuestionAnswer" parameterType="HashMap" resultType="DataRecord">
    select dqa.id dqa.question_code,da.answer_code,da.content,da.popu_content,dqa.disease_code,dqa.answer_spec,dqa.weight,dqa.default_order,dqa.next_question_id
    from diagnosis_question_answer dqa left join diagnosis_answer da on(da.answer_code=dqa.answer_code) where dqa.question_code=#{questionCode}
  </select>
</mapper>